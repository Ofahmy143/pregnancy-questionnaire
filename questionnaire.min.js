class DelfinaQuestionnaire{constructor(){this.languages={en:{questions:[{id:1,text:"Were you born with a heart problem or do you currently have a heart problem that needs medical attention?"},{id:2,text:"Have you ever been told that your heart is not working well, or do you have a heart problem?"},{id:3,text:"Has a doctor told you that you have high blood pressure?"},{id:4,text:"Has a doctor told you that you have diabetes?"},{id:5,text:"Have you ever been diagnosed with a lung disease, or do you have a history of breathing problems?"},{id:6,text:"Do you take any medicine that was not prescribed to you by a doctor? This includes illegal drugs or prescription medicine for reasons other than your health?"},{id:7,text:"Have you ever had surgery on your stomach or intestines, or do you have a problem with your digestive system?"},{id:8,text:"Have you ever been in the hospital or needed treatment because you drank too much alcohol?"}],tips:["Get a preconception visit to review overall health and medical conditions.","Review medications, including over-the-counter and herbal supplements.","Family planning can give you extra time to get healthy before pregnancy.","Go to all your prenatal and postpartum visits.","In partnership with your medical provider, create a pregnancy plan for a healthy pregnancy and a healthy baby.","Always remember to trust your body. If you do not feel right, seek care right away."],results:{high:{count:"4+ yes",message:"For the healthiest baby, your health requires closer and more attention before and during pregnancy. You may have chronic health conditions that require extra attention in pregnancy. See a health care provider at least 6 months prior to trying to become pregnant. You may need more tests, new medications or to see a specialist before and during pregnancy. During delivery you may need extra medical attention."},medium:{count:"1-3 yes",message:"For the healthiest baby, your health will probably require more attention before pregnancy. See a health care provider at least 3 months before trying to become pregnant and create a pregnancy plan. You may need more tests, new medications or see a specialist before and during pregnancy."},low:{count:"0 yes",message:"For the healthiest baby, follow the Tips for Everyone suggested above."}},ui:{title:"Thinking About Having a Baby?",subtitle:"Your health and well-being are important. Let's make sure you are strong and ready, so when you do decide to get pregnant, you'll be set to feel your best.",quizTitle:"Take the PreMA (Preconception Medical Assessment) Quiz",tipsTitle:"Tips for Everyone",submit:"Submit Questionnaire",results:"Your Results",yes:"Yes",no:"No"}},es:{questions:[{id:1,text:"\xBFNaci\xF3 con un problema card\xEDaco o actualmente tiene un problema card\xEDaco que necesita atenci\xF3n m\xE9dica?"},{id:2,text:"\xBFAlguna vez le han dicho que su coraz\xF3n no funciona bien, o tiene un problema card\xEDaco?"},{id:3,text:"\xBFHa sido informado por un m\xE9dico que tiene presi\xF3n arterial alta?"},{id:4,text:"\xBFHa sido informado por un m\xE9dico que tiene diabetes?"},{id:5,text:"\xBFAlguna vez ha sido diagnosticado con una enfermedad pulmonar, o tiene una historia de problemas respiratorios?"},{id:6,text:"\xBFToma alguna medicina que no le fue recetada por un m\xE9dico? Esto incluye drogas ilegales o medicamentos recetados para otros motivos que no sean para su salud?"},{id:7,text:"\xBFAlguna vez ha tenido cirug\xEDa en su est\xF3mago o intestinos, o tiene un problema con su sistema digestivo?"},{id:8,text:"\xBFAlguna vez ha estado en el hospital o ha necesitado tratamiento porque bebi\xF3 demasiado alcohol?"}],tips:["Obtenga una visita previa a la concepci\xF3n para revisar la salud general y las condiciones m\xE9dicas existentes.","Revise los medicamentos, incluidos los de venta libre y los suplementos herbales.","La planificaci\xF3n familiar puede brindarle tiempo adicional para recuperar su salud antes del embarazo.","Asista a todas sus visitas prenatales y posparto.","En colaboraci\xF3n con su proveedor m\xE9dico, cree un plan de embarazo para tener un embarazo saludable y un beb\xE9 saludable.","Recuerde siempre confiar en su cuerpo. Si no se siente bien, busque atenci\xF3n m\xE9dica de inmediato."],results:{high:{count:"4+ s\xED",message:"Para tener un beb\xE9 m\xE1s sano, su salud requiere m\xE1s atenci\xF3n y cercan\xEDa antes y durante el embarazo. Es posible que tenga problemas de salud cr\xF3nicos que requieran atenci\xF3n adicional durante el embarazo. Consulte a un proveedor de atenci\xF3n m\xE9dica al menos 6 meses antes de intentar quedar embarazada. Es posible que necesite m\xE1s pruebas, nuevos medicamentos o consultar a un especialista antes y durante el embarazo. Durante el parto es posible que necesite atenci\xF3n m\xE9dica adicional."},medium:{count:"1-3 s\xED",message:"Para tener un beb\xE9 m\xE1s sano, su salud probablemente requerir\xE1 m\xE1s atenci\xF3n antes del embarazo. Consulte a un proveedor de atenci\xF3n m\xE9dica al menos 3 meses antes de intentar quedar embarazada y elabore un plan de embarazo. Es posible que necesite m\xE1s pruebas, nuevos medicamentos o consultar a un especialista antes y durante el embarazo."},low:{count:"0 s\xED",message:"Para tener un beb\xE9 m\xE1s sano, siga los consejos para todos los sugeridos anteriormente."}},ui:{title:"\xBFEst\xE1 pensando en tener un beb\xE9?",subtitle:"Su salud y bienestar son importantes. Asegur\xE9monos de que est\xE9 fuerte y preparada, para que cuando decida quedar embarazada, se sienta lo mejor posible.",quizTitle:"Realice el cuestionario PreMA (Evaluaci\xF3n m\xE9dica previa a la concepci\xF3n)",tipsTitle:"Consejos para todos",results:"Sus Resultados",yes:"S\xED",no:"No"}}},this.currentLang=navigator.language.startsWith("es")?"es":"en",this.questions=this.languages[this.currentLang].questions,this.tips=this.languages[this.currentLang].tips,this.results=this.languages[this.currentLang].results,this.init()}init(){const a=document.getElementById("delfina-questionnaire");if(a){const b=this.languages[this.currentLang].ui;a.innerHTML=`
      <div class="delfina-container">
        <div class="delfina-header">
          <div class="header-content">
            <h1>${b.title}</h1>
            <div class="language-selector">
              <button class="lang-dropdown-btn">
                <span class="globe-icon">üåê</span>
                <span class="current-lang">${this.currentLang.toUpperCase()}</span>
                <span class="dropdown-arrow">‚ñº</span>
              </button>
              <div class="lang-dropdown-content">
                <a href="#" data-lang="en" class="${"en"===this.currentLang?"active":""}">English</a>
                <a href="#" data-lang="es" class="${"es"===this.currentLang?"active":""}">Espa√±ol</a>
              </div>
            </div>
          </div>
          <p>${b.subtitle}</p>
        </div>
        
        <div class="delfina-content">
          <div class="delfina-questions">
            <h2>${b.quizTitle}</h2>
            <div class="questions-list"></div>
          </div>
          <div class="delfina-tips">
            <h2>
              <span class="tips-icon">‚ú®</span>
              ${b.tipsTitle}
            </h2>
            <ul class="tips-list"></ul>
          </div>
        </div>

        <div class="result-section" style="display: none;">
          <h2>${b.results}</h2>
          <div class="result-content"></div>
        </div>

        <div class="logo-placeholder">
          <img src="./logomark.svg" alt="Logo" /> open sourced with &#10084; by Delfina
        </div>
      </div>
    `,this.renderQuestions(),this.renderTips(),this.setupValidation(),this.setupLanguageToggle()}}setupLanguageToggle(){const a=document.querySelector(".language-selector"),b=document.querySelector(".lang-dropdown-btn"),c=document.querySelectorAll(".lang-dropdown-content a");b.addEventListener("click",b=>{b.stopPropagation(),a.classList.toggle("active")}),document.addEventListener("click",()=>{a.classList.remove("active")}),c.forEach(b=>{b.addEventListener("click",c=>{c.preventDefault();const d=b.dataset.lang;d!==this.currentLang&&(this.currentLang=d,this.questions=this.languages[this.currentLang].questions,this.tips=this.languages[this.currentLang].tips,this.results=this.languages[this.currentLang].results,this.init()),a.classList.remove("active")})})}setupValidation(){const a=document.querySelectorAll("input[type=\"radio\"]");a.forEach(a=>{a.addEventListener("change",()=>{const a=this.questions.every(a=>{const b=document.getElementsByName(`question${a.id}`);return Array.from(b).some(a=>a.checked)});a&&this.handleSubmit()})})}renderQuestions(){const a=document.querySelector(".questions-list"),b=this.languages[this.currentLang].ui;a.innerHTML="",this.questions.forEach(c=>{const d=document.createElement("div");d.className="question-item",d.innerHTML=`
        <p>${c.id}. ${c.text}</p>
        <div class="question-options">
          <label>
            <input type="radio" name="question${c.id}" value="yes">
            <span>${b.yes}</span>
          </label>
          <label>
            <input type="radio" name="question${c.id}" value="no">
            <span>${b.no}</span>
          </label>
        </div>
      `,a.appendChild(d)})}renderTips(){const a=document.querySelector(".tips-list");a.innerHTML="",this.tips.forEach(b=>{const c=document.createElement("li");c.textContent=b,a.appendChild(c)})}handleSubmit(){let a=0;this.questions.forEach(b=>{const c=document.getElementsByName(`question${b.id}`);c.forEach(b=>{b.checked&&"yes"===b.value&&a++})});let b,c,d;4<=a?(b=this.results.high,c="high-risk",d="\uD83D\uDEA8"):1<=a?(b=this.results.medium,c="medium-risk",d="\u26A0\uFE0F"):(b=this.results.low,c="low-risk",d="\u2713");const e=document.querySelector(".result-section"),f=document.querySelector(".result-content");f.innerHTML=`
      <div class="result-box ${c}">
        <div class="result-header">
          <span class="result-count">${b.count}</span>
          <span class="result-icon">${d}</span>
        </div>
        <p class="result-message">${b.message}</p>
      </div>
    `,e.style.display="block",e.scrollIntoView({behavior:"smooth",block:"center"})}}document.addEventListener("DOMContentLoaded",()=>{window.delfinaQuestionnaire=new DelfinaQuestionnaire;const a=navigator.language.startsWith("es")?"es":"en";window.delfinaQuestionnaire.currentLang=a,window.delfinaQuestionnaire.init()});